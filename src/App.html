<div id=app>
  <Cube/>
{#if $api}
  <Printer/>
  {#if powerButtons}
    <PowerBar/>
  {/if}
{:else}
  <div id=error>
    Octoprint is not accessible at {host}
  </div>
{/if}
</div>

<style>
  #app {
    position: fixed;
    width: 100%;
    height: 100%; 
    top: 0;
    left: 0;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap; 
  }
  #error {
    bottom: 0;
    position: absolute;
    font-size: 3em;
    color: rgb(83, 17, 17);
  }
</style>

<script>
  import conf from '../conf.json';
  import store from './stores/ApiVersionStore.js'

  export default {
    components: { 
      PowerBar: './PowerBar.html', 
      Cube: './Cube.html',
      Printer: './Printer.html',
    },
    store: () => store,
    data: () => ({
      powerButtons: conf.powerButtons,
      host: conf.host
    }),
    oncreate() {
      store.start();
    },
    ondestroy() {
      store.stop();
    }
  }
</script>

