<div class='slider control side-column'>
    <div class='value'>
      {value}
    </div>
    <div ref:track class='track'>
      <div class='handle' draggable=true on:dragstart="dragstart(event)" on:drag="drag(event)" on:dragend="dragend(event)" style='top: {handlePosition}%;'></div>
    </div>
    <div class='name'>
      {name}
    </div>
  </div>
  
  <style>
    .slider {
      height: 100vh;
      width: 25vh;
      font-size: 4.5vh;
      text-align: center;
      position: relative;
    }
  
    .slider .value {
      top: 1vh;
      position: absolute;
      width: 100%;
    }
  
    .slider .name {
      bottom: 0;
      position: absolute;
      width: 100%;
    }
  
    .slider .track {
      position: absolute;
      top: 7vh;
      left: 12vh;
      width: 1vh;
      height: 85vh;
      background-color: rgb(24,38,58);
    }
  
    .slider .handle {
      position: relative;
      width: 11vh;
      height: 5vh;
      left: -5vh;
      box-shadow: inset 0 0 1px #54958A, inset 0 0 20px #465468;
      background: rgba(44,58,78,0.8);
    }
  </style>
  
  <script>  
      export default {
        data: () => ({
          value: 0,
          initialValue: 0
        }),
        oncreate() {
          this.set({value: this.get().initialValue});
        },
        computed: { 
          handlePosition({value, maxValue}) {
            return 100-(value/maxValue*100)-2.5
          }
        },
        methods: {
          drag({y}){
            if(y==0) {return;}
            let sliderPos = 1-(y-this.refs.track.offsetTop)/this.refs.track.clientHeight
            sliderPos = sliderPos < 1 ? sliderPos : 1;
            sliderPos = sliderPos > 0 ? sliderPos : 0;   
            this.set({value: Math.floor(sliderPos*this.get().maxValue)});
          },
          dragstart(e) {
            e.dataTransfer.setDragImage(document.createElement('img'), 0, 0);
          },
          dragend(e) {
            const { key, value } = this.get();
            this.fire('change', {key, value});
          }
        }
      }
  </script>
  